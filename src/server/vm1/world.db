{ "%uid": "uid-1e51-f298-5f55-6caa",
  "%class": "server.types.PresenceTracker",
  "is": [ "place", "3d", "mesh", "editable" ],
  "title": "Rob Ott's Place",
  "rotation": [ 0, 0, 0 ],
  "scale": [ 10.0, 10.0, 10.0 ],
  "subObjects": [
    { "object": "http://10.0.2.2:8082/o/uid-c058-2db1-0b26-8f48.json", "coords": [  4, 0, 4 ] },
    { "object": "http://10.0.2.2:8082/o/uid-c058-2db1-0b26-8f48.json", "coords": [ -4, 0, 4 ] },
    { "object": "http://10.0.2.2:8082/o/uid-39da-3645-4f58-50cb.json", "coords": [  0, 0, 27 ] }
  ],
  "vertices": [ [  1.0, 0.0, -1.0 ], [  1.0, 0.0,  1.0 ], [ -1.0, 0.0,  1.0 ], [ -1.0, 0.0, -1.0 ] ],
  "texturepoints": [ [ 0.0, 0.0 ], [ 5.0, 0.0 ], [ 5.0, 5.0 ], [ 0.0, 5.0 ] ],
  "normals": [ [  0.0,  0.5, 0.0 ] ],
  "faces": [ [ "2/3/1","1/2/1","4/1/1" ], [ "2/3/1","4/1/1","3/4/1" ] ],
  "textures": [ "http://athile.net/library/blog/wp-content/uploads/2011/11/grass02-300x300.png" ],
  "vertexShader": "uid-ff5d-1ef4-cfa5-5f92",
  "fragmentShader": "uid-6e92-c60d-d16a-6b35"
}

{ "%uid": "uid-ff5d-1ef4-cfa5-5f92",
  "is": [ "3d", "vertex", "shader", "string", "list" ],
  "title": "Phong Vertex Shader",
  "list": [
    "uniform mat4 mvpm, norm;",
    "attribute vec4 pos;",
    "attribute vec3 nor;",
    "attribute vec2 tex;",
    "varying vec3 pointNorm;",
    "varying vec2 texturePt;",
    "varying vec3 pointPosn;",
    "void main() {",
      "vec4 pp = mvpm * pos;",
      "pointNorm = vec3(norm * vec4(nor, 1.0));",
      "texturePt = tex;",
      "pointPosn = pp.xyz;",
      "gl_Position = pp;",
    "}"
  ]
}

{ "%uid": "uid-6e92-c60d-d16a-6b35",
  "is": [ "3d", "fragment", "shader", "string", "list" ],
  "title": "Phong Fragment Shader",
  "list": [
    "precision mediump float;",
    "uniform mat4 mvpm;",
    "uniform vec4 ambient, diffuse, specular;",
    "uniform vec4 lightPos;",
    "uniform float shininess;",
    "uniform sampler2D texture0;",
    "varying vec3 pointNorm;",
    "varying vec2 texturePt;",
    "varying vec3 pointPosn;",
    "void main(){",
      "vec3 lightPosn = vec3(mvpm * lightPos);",
      "vec3 lightDir=normalize(-lightPosn);",
      "vec3 sightDir=normalize(-pointPosn);",
      "vec3 pointNor=normalize( pointNorm);",
      "gl_FragColor=ambient*texture2D(texture0, texturePt)+diffuse*max(dot(pointNor,normalize(-vec3(lightPos))),0.0)+specular*pow(max(dot(reflect(lightDir,pointNor), sightDir), 0.0), shininess);",
    "}"
  ]
}

