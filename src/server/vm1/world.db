{ "%uid": "uid-1e51-f298-5f55-6caa",
  "%class": "server.types.PresenceTracker",
  "is": [ "place", "3d", "mesh", "editable" ],
  "title": "Rob Ott's Place",
  "rotation": [ 0, 0, 0 ],
  "scale": [ 10.0, 10.0, 10.0 ],
  "subObjects": [
    { "object": "http://10.0.2.2:8082/o/uid-c058-2db1-0b26-8f48.json", "coords": [  4, 0, 4 ] },
    { "object": "http://10.0.2.2:8082/o/uid-c058-2db1-0b26-8f48.json", "coords": [ -4, 0, 4 ] },
    { "object": "http://10.0.2.2:8082/o/uid-39da-3645-4f58-50cb.json", "coords": [  0, 0, 27 ] }
  ],
  "vertices": [ [  1.0, 0.0, -1.0 ], [  1.0, 0.0,  1.0 ], [ -1.0, 0.0,  1.0 ], [ -1.0, 0.0, -1.0 ] ],
  "texturepoints": [ [ 0.0, 0.0 ], [ 5.0, 0.0 ], [ 5.0, 5.0 ], [ 0.0, 5.0 ] ],
  "normals": [ [  0.0,  0.5, 0.0 ] ],
  "faces": [ [ "2/3/1","1/2/1","4/1/1" ], [ "2/3/1","4/1/1","3/4/1" ] ],
  "textures": [ "http://athile.net/library/blog/wp-content/uploads/2011/11/grass02-300x300.png" ],
  "vertexShader": "uid-ff5d-1ef4-cfa5-5f92",
  "fragmentShader": "uid-1ff8-59e9-6dac-9b56"
}

{ "%uid": "uid-ff5d-1ef4-cfa5-5f92",
  "is": [ "3d", "vertex", "shader", "string", "list" ],
  "title": "Phong Vertex Shader",
  "list": [
    "precision mediump float;",
    "uniform mat4 mvpm, norm;",
    "uniform vec4 lightPos;",
    "attribute vec4 pos;",
    "attribute vec3 nor;",
    "attribute vec2 tex;",
    "varying vec3 pointNorm;",
    "varying vec2 texturePt;",
    "varying vec3 lightPosn;",
    "varying vec3 pointPosn;",
    "void main() {",
      "vec4 ppos = mvpm*pos;",
      "vec4 lpos = mvpm*lightPos;",
      "pointNorm = normalize(vec3(norm*vec4(nor,1.0)));",
      "texturePt = tex;",
      "lightPosn = vec3(lpos);",
      "pointPosn = vec3(ppos);",
      "gl_Position = ppos;",
    "}"
  ]
}

{ "%uid": "uid-6e92-c60d-d16a-6b35",
  "is": [ "3d", "fragment", "shader", "string", "list" ],
  "title": "Phong Fragment Shader",
  "list": [
    "precision mediump float;",
    "uniform mat4 mvpm;",
    "uniform vec4 ambient, diffuse, specular;",
    "uniform vec4 lightPos;",
    "uniform float shininess;",
    "uniform sampler2D texture0;",
    "varying vec3 pointNorm;",
    "varying vec2 texturePt;",
    "varying vec3 lightPosn;",
    "varying vec3 pointPosn;",
    "void main(){",
      "vec3 lightDirr=normalize(-vec3(lightPos));",
      "vec3 lightDirn=normalize(pointPosn-lightPosn);",
      "vec3 sightDirn=normalize(pointPosn);",
      "gl_FragColor=ambient*texture2D(texture0,texturePt)+diffuse*max(dot(pointNorm,lightDirr),0.0)+specular*pow(max(dot(reflect(lightDirn,pointNorm),sightDirn),0.0),shininess);",
    "}"
  ]
}

{ "%uid": "uid-1ff8-59e9-6dac-9b56",
  "%class": "server.types.DynamicFile",
  "watching": "fragment-shader.json",
}

